<!DOCTYPE html>
<!-- saved from url=(0050)http://web-manufacture.net/processor/processor.htm -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<title>Processor</title>
		
		<link type="text/css" rel="stylesheet" href="./Processor_files/System.default.css">
		<script type="text/javascript" src="./Processor_files/v1.5"></script>
		<script src="./Processor_files/jquery.min.js.Без названия"></script>
		<link type="text/css" rel="stylesheet" href="./Processor_files/processor.css">
		<script type="text/javascript" src="./Processor_files/kibaprocessor.js.Без названия"></script>
		<script type="text/javascript" src="./Processor_files/animation.js.Без названия"></script>
		<script type="text/javascript" src="./Processor_files/bridge.js.Без названия"></script>
		<script type="text/javascript" src="./Processor_files/UI.js.Без названия"></script>


	</head><div class="log provider system-object invisible"></div><div class="contexts provider system-object invisible" id="Jasp_Contexts"><div selector="context" condition="module-parsing" class="context module-parsing" contextid="1" id="context1context1"></div><div condition="ui-processing" selector=".content[url]:not(.loaded)" class="context ui-processing" contextid="2" id="context2context2"></div><div condition="ui-processing" selector=".json-content[url]:not(.loaded)" contextid="JsonDataLoadingContext" class="context ui-processing" id="JsonDataLoadingContextJsonDataLoadingContext"></div><div condition="ui-processing" selector="div[id]" class="context ui-processing" contextid="3" id="context3context3"></div><div condition="ui-processing" selector="[mapById]" class="context ui-processing" contextid="4" id="context4context4"></div><div condition="ui-processing.ui-clone" selector="[extend]" class="context ui-processing ui-clone" contextid="5" id="context5context5"></div><div condition="module-jasp" selector="jasp:not(.compiled)" class="context module-jasp" contextid="6" id="context6context6"></div><div condition="ui-processing" id="uicomponentsuicomponents" selector=".component[component-url]:not(.jasp-processed-uicomponents)" class="context ui-processing" contextid="uicomponents"></div><div condition="ui-processing" id="uiactionuiaction" selector=".ui-action:not(.jasp-processed-uiaction)" class="context ui-processing" contextid="uiaction"></div><div selector="wait:not(.inprogress):not(.processed)" condition="module-parsing" class="context module-parsing" contextid="7" id="context7context7"></div><div selector="include:not(.inprogress):not(.processed)" condition="module-parsing" class="context module-parsing" contextid="8" id="context8context8"></div><div selector="script:not(.inprogress):not(.processed)[url],script:not(.inprogress):not(.processed)[src]" condition="module-parsing" class="context module-parsing" contextid="9" id="context9context9"></div><div selector="script:not(.inprogress):not(.processed):not([url]):not(.deffered)" condition="module-parsing" class="context module-parsing" contextid="10" id="context10context10"></div><div selector="link:not(.inprogress):not(.processed)[url]" condition="module-parsing" class="context module-parsing" contextid="11" id="context11context11"></div><div selector="style:not(.inprogress):not(.processed)" condition="module-parsing" class="context module-parsing" contextid="12" id="context12context12"></div><div selector="script.deffered:not(.inprogress):not(.processed)" condition="module-post-registered" class="context module-post-registered" contextid="13" id="context13context13"></div><div condition="ui-processing" id="UiSearchBoxContextUiSearchBoxContext" selector="input.hintable:not(.jasp-processed-UiSearchBoxContext)" class="context ui-processing" contextid="UiSearchBoxContext"></div><div condition="ui-processing.ui-clone" id="inputWDTinputWDT" selector="input[default-text]" class="context ui-processing ui-clone" contextid="inputWDT"></div><div condition="ui-processing" id="UiLookupBoxContextUiLookupBoxContext" selector="input.lookup-box:not(.jasp-processed-UiLookupBoxContext)" class="context ui-processing" contextid="UiLookupBoxContext"></div><div condition="ui-processing" id="UiHintableBoxContextUiHintableBoxContext" selector="input.hintable-box:not(.jasp-processed-UiHintableBoxContext)" class="context ui-processing" contextid="UiHintableBoxContext"></div></div><div class="klabnet provider system-object invisible"></div><div class="modules provider system-object invisible" id="Modules_Container"><div class="module processed" url="processor/processor.htm" id="processor_htm"><include url="http://klab.web-manufacture.net/projects/services/ui/htmlelements.htm" class="include jasp-processed-8 processed"></include></div><div class="module loaded processed" url="http://klab.web-manufacture.net/projects/services/ui/htmlelements.htm" id="projects/services/ui/htmlelements_htm">

<script type="text/javascript" class="jasp-processed-10">
	SearchBox = {};
	
	SearchBox.InitElement = function(element){
		var storageKey = element.get("@StorageKey");
		if (!storageKey){
			if (element.id){
				storageKey = window.location.host + window.location.pathname + "/@Hint_" + element.id;
			}
			else{
				return;
			}
		}
		element.storageKey = storageKey;
		element.addEventListener("focus", SearchBox.ElementFocused);		
		//element.addEventListener("keypress", SearchBox.KeyPressed);
		element.addEventListener("keyup", SearchBox.KeyDown);
		element.addEventListener("blur", SearchBox.ElementBlur);
		var sb =  element.searchBox = DOM.div(".search-box.invisible");
		if (element.nextElementSibling){
			element.parentNode.insertBefore(sb, element.nextElementSibling);
		}
		else{			
			element.parentNode.add(sb);
		}
		SearchBox.FillBox(sb, element.storageKey);
	};
	
	SearchBox.FillBox = function(elem, skey){
		var searchItems = localStorage.getItem(skey);
		if (searchItems){
			searchItems = JSON.parse(searchItems);
		}else{
			searchItems = [];
		};
		searchItems = searchItems.sort(SearchBox.SortByRatingAndAlfabet);
		for (var i = 0; i < searchItems.length; i++){
			SearchBox.AddSearchText(elem, searchItems[i].rating, searchItems[i].query);
		};
	};
	
	SearchBox.SortByRatingAndAlfabet = function(a, b){
		if (a.rating == b.rating){
			return a.query > b.query ? 1: -1;
		};
		return a.rating < b.rating ? 1 : -1;
	};
	
	SearchBox.AddSearchText = function(elem, rating, text){
		var div = elem.div(".search-item");
		div.textContent = text;
		div.AttrProperty("Rating");
		rating = parseInt(rating);
		if (isNaN(rating)) rating = 0;
		div.Rating = rating + "";
		div.set("@search-value", text);
		div.onclick = function(){
			elem.value = this.textContent;	
		}
			return div;
	};
	
	SearchBox.ElementFocused = function(){
		this.searchBox.show();
		SearchBox.FilterByText(this.searchBox, this.value);
	};
	
	SearchBox.KeyPressed = function(){
		SearchBox.FilterByText(this.searchBox, this.value);
	};
	
	SearchBox.KeyDown = function(event){
		if (event.keyCode == 40){//down
			this.del(".selected");
			var selected = this.searchBox.get(".search-item.selected");
			var next = null;
			if (selected){
				var next = selected.nextElementSibling;
				while(next && next.is(".invisible")){
					next = next.nextElementSibling;
				}
				selected.del(".selected");
			}			
			if (!next){
				next = this.searchBox.get(".search-item:not(.invisible)");
			}
			if (next){
				next.add(".selected");
				this.add(".selected");
				this.value = next.textContent;
			}
			return true;
		}
		if (event.keyCode == 38){ //up
			this.del(".selected");
			var selected = this.searchBox.get(".search-item.selected");
			var next = null;
			if (selected){
				var next = selected.previousElementSibling;
				while(next && next.is(".invisible")){
					next = next.previousElementSibling;
				}
				this.add(".selected");
				selected.del(".selected");
			}			
			if (!next){
				next = this.searchBox.all(".search-item:not(.invisible)");
				if (next.length > 0){
					next = next[next.length - 1];	
				}
				else{
					next = null;	
				}
			}
			if (next){
				next.add(".selected");
				this.add(".selected");
				this.value = next.textContent;
			}
			return true;
		}
		if (event.keyCode == 13){ //up
			var selected = this.searchBox.get(".search-item.selected");
			if (selected){
				this.value = selected.textContent;	
				this.add(".selected");				
			}
			SearchBox.ElementBlur.call(this);
			return true;
		}
		this.del(".selected");
		SearchBox.FilterByText(this.searchBox, this.value);
	};
	
	SearchBox.ElementBlur = function(){
		this.searchBox.hide();
		if (this.value == "" || this.is("empty")) return;
		var elem = SearchBox.GetElemByText(this.searchBox, this.value);
		if (elem){
			elem.Rating = (parseInt(elem.Rating) + 1) + "";
		}
		else{
			SearchBox.AddSearchText(this.searchBox, 0, this.value);
		}
		SearchBox.Save(this);
	};
	
	SearchBox.GetElemByText = function(elem, text){
		return elem.get(".search-item[search-value='" + text + "']");
	};
	
	SearchBox.FilterByText = function(elem, text){
		elem.all(".search-item.selected").del('.selected');
		if (text == ""){
			elem.all(".search-item").show();
			return;
		}
		elem.all(".search-item").hide();
		elem.all(".search-item[search-value^='" + text + "']").show();
	};
	
	SearchBox.Save = function(inputObj){
		var sitems = [];
		var sbox = inputObj.searchBox;
		sbox.all(".search-item").each(function(item){
			sitems.push({rating: item.Rating, query : item.innerHTML});
		});
		localStorage.setItem(inputObj.storageKey, JSON.stringify(sitems));
	};
	
	/*

SearchBox.SetSearchValue = function(a){
var attr = a.get('@hint');
var inp = DOM.get('.search input');
inp.value = attr;
DOM.all('.fac.d').del();
Plan.ShowSelectedByHint(attr);
Plan.SearchEnding(inp);
};



SearchBox.SearchSpecRes = function(a){
var search = a.value;
if (!search) return;

var proto=DOM.get('.fac.prototype');

DOM.all('.fac.d').del();

var SortedByRatingAndAlfabet = Plan.SearchTrot.sort(Plan.SortByRatingAndAlfabet);
for(var i=0; i<SortedByRatingAndAlfabet.length; i++){
var c=Plan.SearchTrot[i];//зачем объявлена переменная?
var hint_proto=proto.clone();
hint_proto.add('.hidden');
hint_proto.add('.d');
hint_proto.add('@hint',SortedByRatingAndAlfabet[i].query );
DOM.get('.fac.container').add(hint_proto).set(null, SortedByRatingAndAlfabet[i].query);
}

DOM.all('.d[hint*="' + search.toLowerCase() + '"]').del('.hidden');
SearchBox.ShowSelectedByHint(search);		
};

*/
	
	SearchBox.Context = { Condition: "ui-processing" };
	SearchBox.Context.id = "UiSearchBoxContext";
	SearchBox.Context.Selector = "input.hintable:not(.jasp-processed-UiSearchBoxContext)";
	SearchBox.Context.Process = SearchBox.InitElement;
	
	C.Add(SearchBox.Context);
	
	InputWDT = {
		
		InitElement : function(elem){
			elem.onfocus = InputWDT.InputFocused;
			elem.onblur = InputWDT.InputBlur;
			//elem.oninput = InputWDT.CheckChanges;
			elem.update = InputWDT.CheckChanges;
			if(!elem.value || elem.value == elem.get('@default-text')){
				elem.add('.empty');
				elem.value = elem.get('@default-text');
			}
		},
		
		CheckChanges : function(){
			if (this.selfChanged) {
				this.selfChanged = false;
				return;
			}
			if(this.value && this.value != ""){
				this.del('.empty');
			}
			else{
				this.add('.empty');
				this.selfChanged = true;
				this.value = this.get('@default-text');
			}
		},
		
		InputFocused : function(){
			if(this.is('.empty')){
				this.del('.empty');
				this.selfChanged = true;
				this.value='';
			}
		},
		
		InputBlur : function(){
			if(!this.value || this.value == ""){
				this.add('.empty');
				this.selfChanged = true;
				this.value = this.get('@default-text');
			}
		}	
	};
	
	
	InputWDT.Context = { Condition: "ui-processing.ui-clone" };
	InputWDT.Context.id = "inputWDT";
	InputWDT.Context.Selector = "input[default-text]";
	InputWDT.Context.Process = InputWDT.InitElement;
	
	C.Add(InputWDT.Context);
	
	LookupBox = {};
	
	LookupBox.InitElement = function(element){
		var storageKey = element.get("@source");
		element.addEventListener("focus", LookupBox.ElementFocused);		
		//element.addEventListener("keypress", LookupBox.KeyPressed);
		element.addEventListener("keyup", LookupBox.KeyDown);
		element.addEventListener("blur", LookupBox.ElementBlur);
		var sb = element.LookupBox = DOM.div(".search-box.invisible");
		if (element.nextElementSibling){
			element.parentNode.insertBefore(sb, element.nextElementSibling);
		}
		else{			
			element.parentNode.add(sb);
		}
		if (storageKey){
			element.storageKey = storageKey;
			Net.get(storageKey, function(result){
				LookupBox.FillBox.call(element, result);
			});
		}
		else{
			element.localKey = element.get("@local-source");
			if (element.localKey){
				LookupBox.FillBox.call(element, DOM.all(element.localKey));
			}
		}
	};
	
	LookupBox.FillBox = function(result){
		var element = this;
		var searchBox = this.LookupBox;
		if (!result){
			result = [];
		};
		if (typeof this.onData == "function"){
			if (this.onData(result)) return;
		}
		//searchItems = searchItems.sort(LookupBox.SortByRatingAndAlfabet);
		searchBox.del(".search-item");
		for (var i = 0; i < result.length; i++){
			LookupBox.AddSearchText.call(element, searchBox, result[i].id, result[i]);
		};
	};

	LookupBox.AddSearchText = function(searchBox, id, text){
		var div = searchBox.div(".search-item");
		if (text.textContent){
			div.textContent = text.textContent;
		}
		else{
			div.textContent = text;
		}
		if (id){
			div.id = "sItem" + id;
		}
		div.set("@search-value", text);
		var elem = this;
		div.onclick = function(){
			if (typeof elem.onHint == "function"){
				if (elem.onHint(this)) return true;
			}
			elem.value = this.textContent;
		}
		return div;
	};
	
	LookupBox.ElementFocused = function(){
		this.LookupBox.show();
	};
	
	LookupBox.KeyPressed = function(){
		LookupBox.FilterByText.call(this, this.LookupBox, this.value);
	};
	
	LookupBox.KeyDown = function(event){
		if (event.keyCode == 40){//down
			var selected = this.LookupBox.get(".search-item.selected");
			var next = null;
			if (selected){
				var next = selected.nextElementSibling;
				while(next && next.is(".invisible")){
					next = next.nextElementSibling;
				}
				selected.del(".selected");
			}			
			if (!next){
				next = this.LookupBox.get(".search-item:not(.invisible)");
			}
			if (next){
				next.add(".selected");
				this.selectedItem = next;
				if (typeof this.onHint == "function"){
					if (this.onHint(next)) return true;
				}
				this.value = next.textContent;
			}
			return true;
		}
		if (event.keyCode == 38){ //up
			var selected = this.LookupBox.get(".search-item.selected");
			var next = null;
			if (selected){
				var next = selected.previousElementSibling;
				while(next && next.is(".invisible")){
					next = next.previousElementSibling;
				}
				selected.del(".selected");
			}			
			if (!next){
				next = this.LookupBox.all(".search-item:not(.invisible)");
				if (next.length > 0){
					next = next[next.length - 1];	
				}
				else{
					next = null;	
				}
			}
			if (next){
				next.add(".selected");
				this.selectedItem = next;
				if (typeof this.onHint == "function"){
					if (this.onHint(next)) return true;
				}
				this.value = next.textContent;
			}
			return true;
		}
		if (event.keyCode == 13){ //up
			var selected = this.LookupBox.get(".search-item.selected");
			if (selected){
				this.value = selected.textContent;				
			}
			LookupBox.ElementBlur.call(this);
			return true;
		}
		LookupBox.FilterByText.call(this, this.LookupBox, this.value);
	};
	
	LookupBox.ElementBlur = function(){
		this.LookupBox.hide();
		if (this.value == "" || this.is("empty")) return;
		var elem = LookupBox.GetElemByText(this.LookupBox, this.value);
		if (elem){
			this.selectedItem = elem;
			if (typeof this.onHint == "function"){
				if (this.onHint(elem)) return;
			}
			this.value = elem.textContent;
		}
	};
	
	LookupBox.GetElemByText = function(elem, text){
		return elem.get(".search-item[search-value='" + text + "']");
	};
	
	LookupBox.FilterByText = function(elem, text){
		elem.all(".search-item.selected").del('.selected');
		if (text == ""){
			elem.all(".search-item").show();
			return;
		}
		elem.all(".search-item").hide();
		elem.all(".search-item[search-value^='" + text + "']").show();
	};
	
	LookupBox.Context = { Condition: "ui-processing" };
	LookupBox.Context.id = "UiLookupBoxContext";
	LookupBox.Context.Selector = "input.lookup-box:not(.jasp-processed-UiLookupBoxContext)";
	LookupBox.Context.Process = LookupBox.InitElement;
	
	C.Add(LookupBox.Context);
	
	
	
	HintableBox = {};
	
	HintableBox.InitElement = function(element){
		element.addEventListener("focus", HintableBox.ElementFocused);		
		//element.addEventListener("keypress", HintableBox.KeyPressed);
		element.addEventListener("keyup", HintableBox.KeyDown);
		element.addEventListener("blur", HintableBox.ElementBlur);
		var bindSrc = element.get("@bind-source");
		if (bindSrc){
			var sb = element.HintsBox = DOM(bindSrc);
		}
		else{
			sb = element.HintsBox = DOM.div(".search-box.invisible");
			if (element.nextElementSibling){
				element.parentNode.insertBefore(sb, element.nextElementSibling);
			}
			else{			
				element.parentNode.add(sb);
			}
		}
		element.AddSearchItem = HintableBox.AddSearchItem;
		if (element.Controller && typeof element.Controller.OnInit == "function"){
			if (element.Controller.OnInit.call(element, sb)) return;
		}
		if (bindSrc) {
			if (element.Controller && typeof element.Controller.OnLoad == "function"){
				if (element.Controller.OnLoad.call(element, sb)) return;
			};
			return;
		}
		var urlSrc = element.get("@url-source");
		var lookupSrc = element.get("@lookup-source");
		if (lookupSrc){
			
				HintableBox.FillLookup.call(element, DOM.all(lookupSrc));
	
		}
		else{
			if (urlSrc){
				Net.get(urlSrc, function(result){
					HintableBox.FillData.call(element, result);
				});
			}
		}
	};
	
	
	HintableBox.FillLookup = function(result){
		if (!result){ return; };
		var element = this;
		var searchBox = this.HintsBox;
		searchBox.del(".search-item");
		var textField = element.get("@lookup-field");
		for (var i = 0; i < result.length; i++){
			if (textField){
				var div = element.AddSearchItem(result[i][textField]);
			}
			else{
				var div = element.AddSearchItem(result[i].textContent);
			}
			if (this.Controller && typeof this.Controller.OnAdd == "function"){
				if (this.Controller.OnAdd.call(this, div, result[i])) return;
			}
		};
		if (element.Controller && typeof element.Controller.OnLoad == "function"){
			if (element.Controller.OnLoad.call(element, sb)) return;
		};
	};
	
	
	HintableBox.FillData = function(result){
		var element = this;
		var searchBox = this.HintsBox;
		if (!result){
			result = [];
		};
		searchBox.del(".search-item");
		var textField = element.get("@lookup-field");
		for (var i = 0; i < result.length; i++){
			if (textField){
				var div = element.AddSearchItem(result[i][textField]);
			}
			else{
				var div = element.AddSearchItem(JSON.stringify(result[i]));
			}
			if (this.Controller && typeof this.Controller.OnAdd == "function"){
				if (this.Controller.OnAdd.call(this, div, result[i])) return;
			}
		};
		if (element.Controller && typeof element.Controller.OnLoad == "function"){
			if (element.Controller.OnLoad.call(element, sb)) return;
		};
	};
			
	HintableBox.AddSearchItem = function(text){
		var div = this.HintsBox.div(".search-item");
		div.textContent = text;
		div.set("@search-value", text);
		var elem = this;
		div.onmousedown = function(){
			elem.HintsBox.all(".selected").del(".selected");
			this.add(".selected");
			elem.add(".selected");
			if (elem.Controller && typeof elem.Controller.OnApply == "function"){
				if (elem.Controller.OnApply.call(elem, this)) return true;
			}
			elem.value = this.textContent;
			/*setTimeout(function(){
				elem.blur();
			}, 100);*/
		}		
		return div;
	};
	
	HintableBox.ElementFocused = function(){
		this.HintsBox.show();
		if (this.Controller && typeof this.Controller.OnFilter == "function"){
			this.Controller.OnFilter.call(this, this.value, this.HintsBox);
		}
		HintableBox.FilterByText(this, this.value);
	};
	
	HintableBox.KeyPressed = function(){
		if (this.Controller && typeof this.Controller.OnFilter == "function"){
			this.Controller.OnFilter.call(this, this.value, this.HintsBox);
		}
	};
	
	HintableBox.KeyDown = function(event){
		if (event.keyCode == 40){//down
			this.del(".selected");
			var selected = this.HintsBox.get(".search-item.selected");
			var next = null;
			if (selected){
				var next = selected.nextElementSibling;
				while(next && next.is(".invisible")){
					next = next.nextElementSibling;
				}
				selected.del(".selected");
			}			
			if (!next){
				next = this.HintsBox.get(".search-item:not(.invisible)");
			}
			if (next){
				next.add(".selected");
				if (this.Controller && typeof this.Controller.OnHint == "function"){
					if (this.Controller.OnHint.call(this, next)) return true;
				}
				this.add(".selected");
				this.value = next.textContent;
			}
			return true;
		}
		if (event.keyCode == 38){ //up
			this.del(".selected");
			var selected = this.HintsBox.get(".search-item.selected");
			var next = null;
			if (selected){
				var next = selected.previousElementSibling;
				while(next && next.is(".invisible")){
					next = next.previousElementSibling;
				}
				selected.del(".selected");
			}			
			if (!next){
				next = this.HintsBox.all(".search-item:not(.invisible)");
				if (next.length > 0){
					next = next[next.length - 1];	
				}
				else{
					next = null;	
				}
			}
			if (next){
				next.add(".selected");
				if (this.Controller && typeof this.Controller.OnHint == "function"){
					if (this.Controller.OnHint.call(this, next)) return true;
				}
				this.add(".selected");
				this.value = next.textContent;
			}
			return true;
		}
		if (event.keyCode == 13){ //up
			var selected = this.HintsBox.get(".search-item.selected");
			if (selected){
				this.value = selected.textContent;				
			}
			if (this.Controller && typeof this.Controller.OnApply == "function"){
				if (this.Controller.OnApply.call(this, selected)) return true;
			}
			var elem = this;
			setTimeout(function(){
					elem.blur();
					HintableBox.ElementBlur.call(elem);
				}, 400);
			return true;
		}
		if (this.Controller && typeof this.Controller.OnFilter == "function"){
			if (this.Controller.OnFilter.call(this, this.value, this.HintsBox)) return;
		}
		HintableBox.FilterByText(this, this.value);
	};
	
	HintableBox.FilterByText = function(elem, text){
		var sbox = elem.HintsBox;
		var selectedItem = sbox.get(".search-item.selected");
		if (selectedItem){
			if (selectedItem.textContent != text){
				elem.del(".selected");
				selectedItem.del(".selected");
			}
		}
		if (text == ""){
			sbox.all(".search-item").show();
			return;
		}
		sbox.all(".search-item").hide();
		sbox.all(".search-item[search-value*='" + text + "']").show();
	};
	
	HintableBox.ElementBlur = function(){
		this.HintsBox.hide();
		if (this.value == "" || this.is("empty")) return;
		var elem = HintableBox.GetElemByText(this.HintsBox, this.value);
		if (elem){
			if (this.Controller && typeof this.Controller.OnHint == "function"){
				if (this.Controller.OnHint.call(this, elem)) return true;
			}
			this.add(".selected");
			this.value = elem.textContent;
		}
	};
	
	HintableBox.GetElemByText = function(elem, text){
		return elem.get(".search-item[search-value='" + text + "']");
	};
	
	HintableBox.Context = { Condition: "ui-processing" };
	HintableBox.Context.id = "UiHintableBoxContext";
	HintableBox.Context.Selector = "input.hintable-box:not(.jasp-processed-UiHintableBoxContext)";
	HintableBox.Context.Process = HintableBox.InitElement;
	
	C.Add(HintableBox.Context);
	 
	IconBtn = {};
	
	IconBtn.Context = {};
	IconBtn.Context.Selector = ".icon-btn";
	IconBtn.Context.Condition = "ui-processing";
	IconBtn.Context.Process = function(item) {
		var icon = item.attr("icon");
		if (icon != null && icon != '') {
			if (icon.start('http')){
				item.style.backgroundImage = "url('" + icon + "')";
			}
			else{
				var preURL = 'Images/';
				if (M.ServicesUrl) preURL = M.ServicesUrl + '/' + preURL;
				item.style.backgroundImage = "url('" + preURL + icon + "')";
			}
			item.style.backgroundRepeat = "no-repeat";
			item.style.backgroundPosition = "center center";
		}
	};

	
</script>

<style type="text/css" class="processed jasp-processed-12">
	
	.search-box{
		position: absolute;
		border: solid 1px gray;
		padding: 3px 10px;
		box-sizing: border-box;		
		-moz-box-sizing: border-box;
		overflow: hidden;
		background-color: white;
		color: #444;
	}
	
	.search-box .search-item{
		cursor: pointer;
		border-bottom: dotted 1px #aaa;
	}
	
	.search-box .search-item.selected{
		background: yellow;
	}
	
	.js-entity div{
		display: inline-block;
		vertical-align: top;
	}
	
	
	.js-entity{
		
	}
	
	.js-entity.object{
		color : #A4F;	
		background-color: rgba(150, 200, 170, 0.07)
	}
	
	.js-entity.number{
		color : navy;
	}
	
	.js-entity.object.array{
		color : red;
		/*background-color: rgba(150, 150, 200, 0.1)*/
	}
	
	
	.js-entity.object.array>.js-entity.object{
		margin-left: 10px;
	}
	
	.js-entity.string{
		color : #f85;
	}
	
	.js-entity .js-syntax{
		font-weight: bold;	
	}
	
	.js-entity>.object-line{
		padding-left: 20px;
		/*border-left: solid 1px #ccc;*/
	}
	
	.js-entity>.object-line>.object-key{
		color: green;
		min-width: 30px;
	}
	
	.btn-ira{
		border: 2px solid #E0E0E0;
		background: none no-repeat 0 0;
		background-color: white;
		border-radius: 3px 3px 3px 3px;
		box-shadow: 0 1px 1px #FFFFFF;
		color: #666666;
		cursor: pointer;
		display: inline-block;
		font: bold 13px Sans-Serif;
		height: 16px;
		margin: 5px;
		padding: 3px;
		text-align: center;
		text-shadow: 0 1px 1px white;
		vertical-align: middle;
		white-space: nowrap;
		min-width: 60px;
	}
	
	.btn-ira:hover, .btn-ira:focus {
		background: -moz-linear-gradient(center top , white, #E0E0E0) repeat scroll 0 0 transparent;
		border-color: #999999;
		box-shadow: 0 1px 2px rgba(0, 0, 0, 0.25), 0 0 3px #FFFFFF inset;
	}
	
	.btn-ira.clear:active {
		background: -moz-linear-gradient(center top , #E0E0E0, gainsboro) repeat scroll 0 0 transparent;
	}
	
	.btn-ira.ok {
		border: 2px solid #467F71;
	}
	
	.btn-ira.ok:active {
		border: 2px solid #467F71!important;
	}
	
	.btn-ira.clear {
		border: 2px solid #E0E0E0;
	}	
	.btn-ira.close {
		border: 2px solid #FFCA3B;
	}
	.btn-ira.cancel {
		border: 2px solid #FFCA3B;
	}
	.btn-ira.delete {
		border: 2px solid #E52738;
	}
	.btn-ira.ok:hover, .btn-ira.ok:focus {
		background: -moz-linear-gradient(center top , white, #467F71) repeat scroll 0 0 transparent;
		border-color: #999999;
		box-shadow: 0 1px 2px rgba(0, 0, 0, 0.25), 0 0 3px #FFFFFF inset;
	}
	.btn-ira.clear:hover, .btn-ira.clear:focus {
		background: -moz-linear-gradient(center top , white, #E0E0E0) repeat scroll 0 0 transparent;
		border-color: #999999;
		box-shadow: 0 1px 2px rgba(0, 0, 0, 0.25), 0 0 3px #FFFFFF inset;
	}
	.btn-ira.close:hover, .btn-ira.close:focus {
		background: -moz-linear-gradient(center top , white, #E0E0E0) repeat scroll 0 0 transparent;
		border-color: #999999;
		box-shadow: 0 1px 2px rgba(0, 0, 0, 0.25), 0 0 3px #FFFFFF inset;
	}
	.btn-ira.cancel:hover, .btn-ira.cancel:focus {
		background: -moz-linear-gradient(center top , white, #FFCA3B) repeat scroll 0 0 transparent;
		border-color: #999999;
		box-shadow: 0 1px 2px rgba(0, 0, 0, 0.25), 0 0 3px #FFFFFF inset;
	}
	.btn-ira.delete:hover, .btn-ira.delete:focus {
		background: -moz-linear-gradient(center top , white, #E52738) repeat scroll 0 0 transparent;
		border-color: #999999;
		box-shadow: 0 1px 2px rgba(0, 0, 0, 0.25), 0 0 3px #FFFFFF inset;
	}
	.btn-ira.ok:active {
		background: -moz-linear-gradient(center top , #467F71, gainsboro) repeat scroll 0 0 transparent;
	}
	.btn-ira.clear:active {
		background: -moz-linear-gradient(center top , #E0E0E0, gainsboro) repeat scroll 0 0 transparent;
	}
	.btn-ira.close:active {
		background: -moz-linear-gradient(center top , #E0E0E0, gainsboro) repeat scroll 0 0 transparent;
	}
	.btn-ira.cancel:active {
		background: -moz-linear-gradient(center top , #FFCA3B, gainsboro) repeat scroll 0 0 transparent;
	}
	.btn-ira.delete:active {
		background: -moz-linear-gradient(center top , #E52738, gainsboro) repeat scroll 0 0 transparent;
	}
	
	
	.icon-btn {
		background-position: center center;
		background-repeat: no-repeat;
		/*background-size: 48px 48px;
		-moz-background-size: 48px 48px;*/
		border: 1px solid silver;
		border-radius: 10px 10px 10px 10px;
		cursor: pointer;
		display: inline-block;
		height: 50px;
		margin: 2px;
		text-align: center;
		vertical-align: top;
		width: 50px;
		font-size: 10px;
		position: relative;
	}
	
	.icon-btn.fixedsize {
		background-size: 48px 48px;
		-moz-background-size: 48px 48px;
	}
	
	.icon-btn.fixedsize.small {
		background-size: 32px 32px;
		-moz-background-size: 32px 32px;
	}
	
	.icon-btn.small {
		border-radius: 4px;
		width: 32px;
		height: 32px;
	}
	
	.icon-btn:hover{
		border: 1px solid red;
		background-color: yellow;    
	}
	
	.icon-btn:active{
		background-color: orange;    
	}
		
	
	.boxed{
		border: solid 1px gray;
		border-radius : 3px;
		padding : 5px 10px;
	}
	
	.boxed-inline{
		display: inline-block;
		border: solid 1px gray;
		border-radius : 3px;
		padding : 5px 10px;
	}
	
	.link:hover{
		cursor: pointer;
		color: blue;
	}
	input.empty{
		border: solid 1px grey;
		border-radius : 3px;
		padding : 5px 10px;
	}
</style>
<script type="text/javascript" class="module-script loaded processed" url="http://services.web-manufacture.net/base/v1.3/ui.js" src="./Processor_files/UI.js(1).Без названия" module-id="projects/services/ui/htmlelements_htm"></script></div></div><div class="klabstorage provider system-object invisible"></div><div class="ui provider system-object invisible" id="UI"></div>
	<body onclick="Processor.process()">
				
		<div id="Legend">
			<a href="https://docs.google.com/presentation/d/1kFyu9Mi_daQ8-rNhDuTBNMtDHR_EuoaO9huZL6Zs6pY/edit?usp=sharing">Пояснение работы тут</a>
			<br><br>
			Если в окошке In появляется число, оно сразу перемещается в Т (затирая то что там было).  <br>
			Если в окошке In появляется команда, она сразу выполняется <br>
			После исполнения команды или чтения числа лента In перемещается на 1 клетку вниз, если не была перемотана. <br>
			Лента In по команде может быть перемотана в любую сторону <br>
			Лента Memory также может быть перемотана в любую сторону <br>
			Лента Out не перематывается и при записи всегда смещается вниз на 1 клетку <br>
			Все команды деляться на 4 группы: 
			<pre style="padding-left: 5px; padding-top: 3px; margin-top: 0px;"><font style="color: #080;" class="lheader">Комманды переноса</font>
Переписывают из одного окошка в другое
<b>AT</b>   A -&gt; T    Перенести значение А в окошко Т
<b>MT </b>  M -&gt; T    Перенести из окошка М в окошко Т
<b>TA</b>   T -&gt; A    Перенести из Т в окошко А
<b>TM</b>   T -&gt; M    Перенести из Т в окошко М
<b>TO </b>  T -&gt; O    Перенести из Т в окошко Out

<font style="color: #008;" class="lheader">Математика</font>
Делают операцию с числами из А и Т и пишут в А результат
<b>Sub</b>   A = A - T    Вычесть Т из А и записать в А
<b>Add</b>   A = A + T   Добавить T к А и записать в А
<b>Mul</b>    A = A * T    Умножить Т на А и записать в А
<b>Div</b>     A = A / T    Поделить А на Т и записать в А

<font style="color: #800;" class="lheader">Перемотка</font> 
Перематывают ленты на количество клеток которое видно в окошке Т
<b>JI</b>    I# = I# + T       Перемотать ленту Input на число Т
<b>JM</b>  M# = M# + T   Перемотать ленту Memory на Т

<font style="color: #a70;" class="lheader">Условия</font>
Условие можно приписать к любой комманде, если не выполняется
то комманду пропускают.
<b>?N</b>     Выполнить только если A&lt;0
<b>?Z</b>      Выполнить только если A=0
<b>?P</b>      Выполнить только если A&gt;0


Примеры программ:

0,4,TA,1,Sub,JM,AT,TO,TM,-7,JI?P,0,TO

0,TM,4,TA,1,Sub,AT,TO,1,JM,AM,-1,JM,MT,Add,AM,1,JM,MA,-1,JM,-18,JI?P,MT,TO
</pre>

		</div>
		<div id="ProcessorBlock">
			<div id="MemoryStrip" class="strip" style="width: 2700px; left: 84px;"><div class="mem inner" id="mem0"><div class="num">0</div><div class="content">0</div></div><div class="mem inner" id="mem1" style="display: inline-block;"><div class="num">1</div><div class="content">3</div></div><div class="mem inner" id="mem2" style="display: inline-block;"><div class="num">2</div><div class="content">1</div></div><div class="mem inner" id="mem3" style="display: inline-block;"><div class="num">3</div><div class="content">-1</div></div><div class="mem inner" id="mem4"><div class="num">4</div><div class="content">&nbsp;</div></div><div class="mem inner" id="mem5"><div class="num">5</div><div class="content">&nbsp;</div></div><div class="mem inner" id="mem6"><div class="num">6</div><div class="content">&nbsp;</div></div><div class="mem inner" id="mem7"><div class="num">7</div><div class="content">&nbsp;</div></div><div class="mem inner" id="mem8"><div class="num">8</div><div class="content">&nbsp;</div></div><div class="mem inner" id="mem9"><div class="num">9</div><div class="content">&nbsp;</div></div><div class="mem inner" id="mem10"><div class="num">10</div><div class="content">&nbsp;</div></div><div class="mem inner" id="mem11"><div class="num">11</div><div class="content">&nbsp;</div></div><div class="mem inner" id="mem12"><div class="num">12</div><div class="content">&nbsp;</div></div><div class="mem inner" id="mem13"><div class="num">13</div><div class="content">&nbsp;</div></div><div class="mem inner" id="mem14"><div class="num">14</div><div class="content">&nbsp;</div></div><div class="mem inner" id="mem15"><div class="num">15</div><div class="content">&nbsp;</div></div><div class="mem inner" id="mem16"><div class="num">16</div><div class="content">&nbsp;</div></div><div class="mem inner" id="mem17"><div class="num">17</div><div class="content">&nbsp;</div></div><div class="mem inner" id="mem18"><div class="num">18</div><div class="content">&nbsp;</div></div><div class="mem inner" id="mem19"><div class="num">19</div><div class="content">&nbsp;</div></div><div class="mem inner" id="mem20"><div class="num">20</div><div class="content">&nbsp;</div></div><div class="mem inner" id="mem21"><div class="num">21</div><div class="content">&nbsp;</div></div><div class="mem inner" id="mem22"><div class="num">22</div><div class="content">&nbsp;</div></div><div class="mem inner" id="mem23"><div class="num">23</div><div class="content">&nbsp;</div></div><div class="mem inner" id="mem24"><div class="num">24</div><div class="content">&nbsp;</div></div><div class="mem inner" id="mem25"><div class="num">25</div><div class="content">&nbsp;</div></div><div class="mem inner" id="mem26"><div class="num">26</div><div class="content">&nbsp;</div></div><div class="mem inner" id="mem27"><div class="num">27</div><div class="content">&nbsp;</div></div><div class="mem inner" id="mem28"><div class="num">28</div><div class="content">&nbsp;</div></div><div class="mem inner" id="mem29"><div class="num">29</div><div class="content">&nbsp;</div></div></div>
			<div id="InputStrip" class="strip" style="height: 2700px; top: -1293px;"><div class="in inner" id="in29"><div class="num">29</div><div class="content">&nbsp;</div></div><div class="in inner" id="in28"><div class="num">28</div><div class="content">&nbsp;</div></div><div class="in inner" id="in27"><div class="num">27</div><div class="content">&nbsp;</div></div><div class="in inner" id="in26"><div class="num">26</div><div class="content">&nbsp;</div></div><div class="in inner" id="in25"><div class="num">25</div><div class="content">&nbsp;</div></div><div class="in inner" id="in24"><div class="num">24</div><div class="content">&nbsp;</div></div><div class="in inner" id="in23"><div class="num">23</div><div class="content">&nbsp;</div></div><div class="in inner" id="in22"><div class="num">22</div><div class="content">&nbsp;</div></div><div class="in inner" id="in21"><div class="num">21</div><div class="content">&nbsp;</div></div><div class="in inner" id="in20"><div class="num">20</div><div class="content">&nbsp;</div></div><div class="in inner" id="in19"><div class="num">19</div><div class="content">&nbsp;</div></div><div class="in inner" id="in18"><div class="num">18</div><div class="content">&nbsp;</div></div><div class="in inner" id="in17"><div class="num">17</div><div class="content">&nbsp;</div></div><div class="in inner" id="in16"><div class="num">16</div><div class="content">&nbsp;</div></div><div class="in inner" id="in15"><div class="num">15</div><div class="content">&nbsp;</div></div><div class="in inner" id="in14"><div class="num">14</div><div class="content">&nbsp;</div></div><div class="in inner" id="in13"><div class="num">13</div><div class="content">&nbsp;</div></div><div class="in inner" id="in12" style="display: inline-block;"><div class="num">12</div><div class="content">TO</div></div><div class="in inner" id="in11" style="display: inline-block;"><div class="num">11</div><div class="content">0</div></div><div class="in inner" id="in10" style="display: inline-block;"><div class="num">10</div><div class="content">JI?P</div></div><div class="in inner" id="in9" style="display: inline-block;"><div class="num">9</div><div class="content">-7</div></div><div class="in inner" id="in8" style="display: inline-block;"><div class="num">8</div><div class="content">TM</div></div><div class="in inner" id="in7" style="display: inline-block;"><div class="num">7</div><div class="content">TO</div></div><div class="in inner" id="in6" style="display: inline-block;"><div class="num">6</div><div class="content">AT</div></div><div class="in inner" id="in5" style="display: inline-block;"><div class="num">5</div><div class="content">JM</div></div><div class="in inner" id="in4" style="display: inline-block;"><div class="num">4</div><div class="content">Sub</div></div><div class="in inner" id="in3" style="display: inline-block;"><div class="num">3</div><div class="content">1</div></div><div class="in inner" id="in2" style="display: inline-block;"><div class="num">2</div><div class="content">TA</div></div><div class="in inner" id="in1" style="display: inline-block;"><div class="num">1</div><div class="content">4</div></div><div class="in inner" id="in0" style="display: inline-block;"><div class="num">0</div><div class="content">0</div></div></div>
			<div id="OutputStrip" class="strip" style="height: 2700px; top: -2103px;"><div class="out inner" id="out29"><div class="num">29</div><div class="content">&nbsp;</div></div><div class="out inner" id="out28"><div class="num">28</div><div class="content">&nbsp;</div></div><div class="out inner" id="out27"><div class="num">27</div><div class="content">&nbsp;</div></div><div class="out inner" id="out26"><div class="num">26</div><div class="content">&nbsp;</div></div><div class="out inner" id="out25"><div class="num">25</div><div class="content">&nbsp;</div></div><div class="out inner" id="out24"><div class="num">24</div><div class="content">&nbsp;</div></div><div class="out inner" id="out23"><div class="num">23</div><div class="content">&nbsp;</div></div><div class="out inner" id="out22"><div class="num">22</div><div class="content">&nbsp;</div></div><div class="out inner" id="out21"><div class="num">21</div><div class="content">&nbsp;</div></div><div class="out inner" id="out20"><div class="num">20</div><div class="content">&nbsp;</div></div><div class="out inner" id="out19"><div class="num">19</div><div class="content">&nbsp;</div></div><div class="out inner" id="out18"><div class="num">18</div><div class="content">&nbsp;</div></div><div class="out inner" id="out17"><div class="num">17</div><div class="content">&nbsp;</div></div><div class="out inner" id="out16"><div class="num">16</div><div class="content">&nbsp;</div></div><div class="out inner" id="out15"><div class="num">15</div><div class="content">&nbsp;</div></div><div class="out inner" id="out14"><div class="num">14</div><div class="content">&nbsp;</div></div><div class="out inner" id="out13"><div class="num">13</div><div class="content">&nbsp;</div></div><div class="out inner" id="out12"><div class="num">12</div><div class="content">&nbsp;</div></div><div class="out inner" id="out11"><div class="num">11</div><div class="content">&nbsp;</div></div><div class="out inner" id="out10"><div class="num">10</div><div class="content">&nbsp;</div></div><div class="out inner" id="out9"><div class="num">9</div><div class="content">&nbsp;</div></div><div class="out inner" id="out8"><div class="num">8</div><div class="content">&nbsp;</div></div><div class="out inner" id="out7"><div class="num">7</div><div class="content">&nbsp;</div></div><div class="out inner" id="out6"><div class="num">6</div><div class="content">&nbsp;</div></div><div class="out inner" id="out5"><div class="num">5</div><div class="content">&nbsp;</div></div><div class="out inner" id="out4"><div class="num">4</div><div class="content">&nbsp;</div></div><div class="out inner" id="out3" style="display: inline-block;"><div class="num">3</div><div class="content">0</div></div><div class="out inner" id="out2" style="display: inline-block;"><div class="num">2</div><div class="content">-1</div></div><div class="out inner" id="out1" style="display: inline-block;"><div class="num">1</div><div class="content">1</div></div><div class="out inner" id="out0" style="display: inline-block;"><div class="num">0</div><div class="content">3</div></div></div>
			<div id="TStrip" class="ATstrip strip" style="display: block;">0</div>
			<div id="AStrip" class="ATstrip strip" style="display: block;">-1</div>
			<div id="NStrip" class="NZPstrip strip" style="color: rgb(255, 0, 0);">?N</div>
			<div id="ZStrip" class="NZPstrip strip" style="color: gray;">?Z</div>
			<div id="PStrip" class="NZPstrip strip" style="color: gray;">?P</div>
		</div>
		<input id="InputDataEdit" type="text" default-text="введите код через запятую" class="">

	
</body><div class="events provider system-object invisible" id="Events_System"><div class="event single" id="onconnectionstate"></div><div class="event single" id="onmoduleregistered" handlers="1"><div class="handler"></div><div class="event-fire" name="onmoduleregistered" date="16:35:34.539" condition="processor/processor.htm">0 handler processed succesfully</div><div class="event-fire" name="onmoduleregistered" date="16:35:34.544" condition="http://klab.web-manufacture.net/projects/services/ui/htmlelements.htm">0 handler processed succesfully</div></div><div class="event single" id="onmoduleload" handlers="0"><div class="event-fire" name="onmoduleload" date="16:35:34.447" condition="http://klab.web-manufacture.net/projects/services/ui/htmlelements.htm">0 handler processed succesfully</div></div><div class="event single" id="onmoduleloaded" handlers="0"><div class="event-fire" name="onmoduleloaded" date="16:35:34.525" condition="http://klab.web-manufacture.net/projects/services/ui/htmlelements.htm">0 handler processed succesfully</div></div><div class="event single" id="onmodulesloaded" handlers="0"><div class="event-fire" name="onmodulesloaded" date="16:35:34.543" condition="processor/processor.htm">0 handler processed succesfully</div></div><div class="event single" id="onactionevent"></div></div></html>